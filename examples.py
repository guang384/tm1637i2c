import time
from tm1637i2c import TM1637I2C

dev = TM1637I2C("/dev/i2c-0")
print('inited.')
time.sleep(2)

dev.brightness(TM1637I2C.BRIGHTNESS_LEVEL_4)
print('brightness level to 4.')
time.sleep(2)

dev.display(TM1637I2C.DIGIT_0,TM1637I2C.DIGIT_3,TM1637I2C.DIGIT_5,TM1637I2C.DIGIT_9)
print('display [0359].')
time.sleep(2)

dev.display(TM1637I2C.DIGIT_0,TM1637I2C.DIGIT_3|TM1637I2C.SEGMENT_DECIMAL_POINT,TM1637I2C.DIGIT_5,TM1637I2C.DIGIT_9)
print('display [0359] with colon.')
time.sleep(2)

dev.show(1234)
print('show [1234].')
time.sleep(2)

dev.show(1234,colon=True)
print('show [1234] with colon.')
time.sleep(2)

dev.display(TM1637I2C.DISPLY_BLANK,TM1637I2C.DISPLY_BLANK,TM1637I2C.DISPLY_BLANK,TM1637I2C.DISPLY_BLANK)
print('display blank.')
time.sleep(2)

print('A small animation effect')

'''
  
 --a--
|     |
f     b
|     |
 --g--  
|     |
e     c
|     |
 --d--   (dp)
  
'''
frames = [
    [TM1637I2C.SEGMENT_F|TM1637I2C.SEGMENT_A, TM1637I2C.DISPLY_BLANK, TM1637I2C.DISPLY_BLANK, TM1637I2C.DISPLY_BLANK],
    [TM1637I2C.SEGMENT_A ,TM1637I2C.SEGMENT_A, TM1637I2C.DISPLY_BLANK, TM1637I2C.DISPLY_BLANK],
    [TM1637I2C.DISPLY_BLANK, TM1637I2C.SEGMENT_A, TM1637I2C.SEGMENT_A, TM1637I2C.DISPLY_BLANK],
    [TM1637I2C.DISPLY_BLANK, TM1637I2C.DISPLY_BLANK, TM1637I2C.SEGMENT_A, TM1637I2C.SEGMENT_A],
    [TM1637I2C.DISPLY_BLANK, TM1637I2C.DISPLY_BLANK, TM1637I2C.DISPLY_BLANK, TM1637I2C.SEGMENT_A|TM1637I2C.SEGMENT_B],
    [TM1637I2C.DISPLY_BLANK, TM1637I2C.DISPLY_BLANK, TM1637I2C.DISPLY_BLANK, TM1637I2C.SEGMENT_B|TM1637I2C.SEGMENT_C],
    [TM1637I2C.DISPLY_BLANK, TM1637I2C.DISPLY_BLANK, TM1637I2C.DISPLY_BLANK, TM1637I2C.SEGMENT_C|TM1637I2C.SEGMENT_D],
    [TM1637I2C.DISPLY_BLANK, TM1637I2C.DISPLY_BLANK, TM1637I2C.SEGMENT_D, TM1637I2C.SEGMENT_D],
    [TM1637I2C.DISPLY_BLANK, TM1637I2C.SEGMENT_D, TM1637I2C.SEGMENT_D, TM1637I2C.DISPLY_BLANK],
    [TM1637I2C.SEGMENT_D, TM1637I2C.SEGMENT_D, TM1637I2C.DISPLY_BLANK, TM1637I2C.DISPLY_BLANK],
    [TM1637I2C.SEGMENT_D|TM1637I2C.SEGMENT_E, TM1637I2C.DISPLY_BLANK, TM1637I2C.DISPLY_BLANK,TM1637I2C.DISPLY_BLANK],
    [TM1637I2C.SEGMENT_E|TM1637I2C.SEGMENT_F, TM1637I2C.DISPLY_BLANK, TM1637I2C.DISPLY_BLANK,TM1637I2C.DISPLY_BLANK],
]

for i in range(1, 5):
    for frame in frames:
        dev.display(frame[0], frame[1], frame[2], frame[3])
        time.sleep(0.07)
        
# show 'DONE'
dev.display(
    TM1637I2C.SEGMENT_B|TM1637I2C.SEGMENT_C|TM1637I2C.SEGMENT_D|TM1637I2C.SEGMENT_E|TM1637I2C.SEGMENT_G, # d
    TM1637I2C.SEGMENT_E|TM1637I2C.SEGMENT_D|TM1637I2C.SEGMENT_C|TM1637I2C.SEGMENT_G, # o
    TM1637I2C.SEGMENT_E|TM1637I2C.SEGMENT_G|TM1637I2C.SEGMENT_C, # n
    TM1637I2C.SEGMENT_A|TM1637I2C.SEGMENT_F|TM1637I2C.SEGMENT_G|TM1637I2C.SEGMENT_E|TM1637I2C.SEGMENT_D, # E
)
time.sleep(0.07)
dev.brightness(TM1637I2C.BRIGHTNESS_LEVEL_2)
print('all done.')
